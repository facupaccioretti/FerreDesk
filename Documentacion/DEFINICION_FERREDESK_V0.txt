# FERREDESK V0 - SISTEMA INTEGRAL DE GESTIÓN PARA FERRETERÍAS

## DEFINICIÓN GENERAL

FerreDesk v0 es un sistema integral de gestión empresarial específicamente diseñado para ferreterías y comercios similares que operan bajo la normativa fiscal argentina. El sistema combina una moderna interfaz web desarrollada en React con un robusto backend en Django, proporcionando una solución completa para la administración comercial, fiscal y operativa de establecimientos de venta de materiales, herramientas y productos ferreteros.

## OBJETIVOS PRINCIPALES DEL SISTEMA

### 1. CUMPLIMIENTO FISCAL ARGENTINO AUTOMATIZADO
- **Objetivo**: Garantizar el cumplimiento total de las obligaciones fiscales argentinas de manera automática y transparente para el usuario.
- **Propósito**: Eliminar errores manuales en la facturación fiscal, asegurar la correcta discriminación de IVA según tipo de comprobante, y mantener la trazabilidad completa de todas las operaciones comerciales.

### 2. GESTIÓN INTELIGENTE DE PRECIOS Y MÁRGENES
- **Objetivo**: Implementar un sistema de precios basado en costo + margen + IVA que permita control granular de la rentabilidad.
- **Propósito**: Facilitar la toma de decisiones comerciales mediante el análisis automático de márgenes, costos y rentabilidad por producto, proveedor y categoría.

### 3. CONTROL INTEGRAL DE INVENTARIO
- **Objetivo**: Proporcionar visibilidad completa del stock, movimientos y disponibilidad de productos en tiempo real.
- **Propósito**: Optimizar la gestión de compras, prevenir faltantes críticos, y mantener niveles óptimos de inventario según la demanda histórica.

### 4. AUTOMATIZACIÓN DE PROCESOS COMERCIALES
- **Objetivo**: Digitalizar y automatizar todos los procesos desde la cotización hasta la facturación final.
- **Propósito**: Reducir tiempos operativos, minimizar errores humanos, y mejorar la experiencia del cliente mediante procesos más eficientes.

### 5. INTELIGENCIA DE NEGOCIO INTEGRADA
- **Objetivo**: Generar información estratégica automática para la toma de decisiones empresariales.
- **Propósito**: Transformar datos operativos en insights accionables sobre rentabilidad, tendencias de venta, performance de productos y eficiencia operativa.

## MÓDULOS PRINCIPALES Y SUS PROPÓSITOS

### SISTEMA ARCA DE FACTURACIÓN ELECTRÓNICA
**Directorio Principal**: `ferredesk_v0/backend/ferreapps/ventas/ARCA/`

**Propósito Central**: Integrar completamente FerreDesk con los servicios oficiales de AFIP para emisión automática de comprobantes fiscales electrónicos, cumpliendo con las normativas argentinas de facturación digital.

**Objetivos Específicos**:
- **Emisión Automática de Comprobantes**: Generar automáticamente CAE (Código de Autorización Electrónico) para todas las facturas y notas de crédito del sistema.
- **Consulta al Padrón AFIP**: Validar automáticamente datos fiscales de clientes consultando directamente al padrón oficial de AFIP.
- **Autenticación Robusta**: Manejar tokens de autenticación con AFIP de forma segura y automática, incluyendo renovación automática.
- **Generación de Códigos QR**: Crear códigos QR oficiales según especificaciones AFIP para cada comprobante emitido.
- **Configuración Flexible**: Soportar ambientes de homologación y producción con configuración dinámica por ferretería.
- **Manejo de Errores Transparente**: Procesar y comunicar errores de AFIP de manera comprensible para el usuario final.

**Componentes Clave**:
- `FerreDeskARCA.py`: Orquestador principal que coordina todo el proceso de emisión fiscal
- `WSFEv1Service.py`: Cliente especializado para el servicio de facturación electrónica wsfev1 de AFIP
- `WSConstanciaInscripcionService.py`: Cliente para consultas al padrón tributario de AFIP
- `FerreDeskAuth.py`: Sistema de autenticación con manejo automático de tokens
- `TokenManager.py`: Gestión inteligente de tokens con renovación automática
- `ConfigManager.py`: Configuración centralizada para diferentes ambientes (HOM/PROD)
- `QRGenerator.py`: Generación de códigos QR según especificaciones oficiales AFIP
- `armador_arca.py`: Preparación y validación de datos para envío a AFIP

### SISTEMA DE LIBRO IVA FISCAL
**Archivos Principales**: `ferredesk_v0/backend/ferreapps/ventas/servicies/libro_iva_service.py` y `libro_iva_export_service.py`
**Frontend**: `ferredesk_v0/frontend/src/components/Presupuestos y Ventas/LibroIvaVentas/`

**Propósito Central**: Generar automáticamente libros IVA ventas conforme a las exigencias fiscales argentinas, consolidando datos de las vistas calculadas del sistema y exportando en múltiples formatos oficiales.

**Objetivos Específicos**:
- **Generación Automática de Libro IVA**: Crear libros IVA ventas por período con cálculos precisos de alícuotas y totales.
- **Múltiples Tipos de Libro**: Soportar libro convencional (solo fiscales), informal (incluye internos) e informal con presupuestos.
- **Exportación Múltiple**: Generar archivos en PDF (oficial AFIP), Excel (editable) y JSON (integración).
- **Validación Fiscal**: Verificar integridad de datos y consistencia con normativas argentinas.
- **Consolidación Inteligente**: Usar vistas calculadas existentes para garantizar precisión sin recálculos.

**Componentes Clave**:
- `LibroIvaExport.js`: Interfaz moderna para selección de formato y período de exportación
- `LibroIvaTable.js`: Visualización tabular de datos del libro con filtros dinámicos
- `LibroIvaPeriodoSelector.js`: Selector intuitivo de período fiscal con validaciones

### SISTEMA DE ALERTAS Y NOTIFICACIONES
**Backend**: `ferredesk_v0/backend/ferreapps/alertas/`
**Frontend**: `ferredesk_v0/frontend/src/components/AlertasManager.js`

**Propósito Central**: Proporcionar un sistema integral de alertas operativas que permita monitorear aspectos críticos del negocio como stock bajo, vencimientos, pagos pendientes y eventos del sistema.

**Objetivos Específicos**:
- **Monitoreo Proactivo**: Detectar automáticamente situaciones que requieren atención inmediata.
- **Categorización Inteligente**: Clasificar alertas por tipo (stock, ventas, proveedores, sistema) y prioridad.
- **Gestión Centralizada**: Proporcionar una interfaz única para revisar, gestionar y resolver alertas.
- **Personalización por Usuario**: Permitir configuración específica de alertas por usuario del sistema.
- **Seguimiento de Estado**: Controlar el ciclo de vida completo de cada alerta desde creación hasta resolución.

**Componentes Clave**:
- `Alerta` (Modelo): Estructura de datos para alertas con tipos, prioridades y estados
- `Notificacion` (Modelo): Sistema de notificaciones por usuario con control de lectura
- `AlertasManager.js`: Interfaz completa de gestión con filtros por tipo y estado

### SISTEMA DE CONSULTA AL PADRÓN AFIP
**Backend**: `ferredesk_v0/backend/ferreapps/clientes/views.py` (ProcesarCuitArcaAPIView)
**Frontend**: `ferredesk_v0/frontend/src/utils/useValidacionCUIT.js`

**Propósito Central**: Automatizar la validación y autocompletado de datos fiscales de clientes mediante consulta directa al padrón oficial de AFIP, garantizando precisión y cumplimiento normativo.

**Objetivos Específicos**:
- **Validación Automática de CUIT**: Verificar formato y dígito verificador antes de consultar AFIP.
- **Autocompletado Inteligente**: Completar automáticamente razón social, domicilio fiscal y condición IVA.
- **Detección de Condición IVA**: Determinar automáticamente si el contribuyente es Responsable Inscripto, Monotributista, etc.
- **Mapeo Inteligente**: Convertir datos de AFIP al formato interno del sistema de manera transparente.
- **Manejo de Errores**: Procesar respuestas de AFIP y comunicar errores de manera comprensible.

**Componentes Clave**:
- `ProcesarCuitArcaAPIView`: Endpoint que orquesta la consulta a AFIP y procesamiento de datos
- `useValidacionCUIT.js`: Hook personalizado que maneja validación y consulta ARCA desde el frontend
- Integración con `ClienteForm.js`: Autocompletado automático en formularios de clientes

### DASHBOARDS ANALÍTICOS INTERACTIVOS
**Directorio**: `ferredesk_v0/frontend/src/components/Dashboards/`

**Propósito Central**: Proporcionar inteligencia de negocio visual mediante dashboards interactivos que permiten analizar tendencias de ventas, performance de productos y comportamiento de clientes.

**Objetivos Específicos**:
- **Análisis de Clientes**: Identificar clientes más valiosos por total facturado, cantidad de productos o frecuencia de compras.
- **Performance de Productos**: Visualizar productos más vendidos por cantidad o ingresos generados.
- **Visualización Dinámica**: Gráficos interactivos con Chart.js que se adaptan a diferentes métricas.
- **Responsive Design**: Dashboards que se adaptan a diferentes tamaños de pantalla usando container queries.
- **Métricas Cambiantes**: Permitir cambio dinámico entre diferentes tipos de análisis sin recargar página.

**Componentes Clave**:
- `ClientesMasVentas.js`: Dashboard de análisis de clientes con métricas configurables
- `ProductosMasVendidos.js`: Análisis visual de productos con mejor performance
- `ClientesMasVentasSimple.js`: Versión simplificada para vistas compactas

### SISTEMA DE INFORMES DE STOCK BAJO
**Backend**: Integrado en models y APIs existentes
**Frontend**: `ferredesk_v0/frontend/src/components/Informes/StockBajoList.js`

**Propósito Central**: Generar informes automatizados de productos que requieren reposición de stock, facilitando la gestión proactiva de inventario y previniendo quiebres de stock.

**Objetivos Específicos**:
- **Detección Automática**: Identificar productos cuyo stock actual está por debajo del mínimo configurado.
- **Priorización Inteligente**: Mostrar diferencia entre stock actual y mínimo para priorizar reposiciones.
- **Información de Proveedores**: Incluir datos del proveedor principal para facilitar órdenes de compra.
- **Exportación a PDF**: Generar reportes imprimibles para uso offline o envío a proveedores.
- **Actualización en Tiempo Real**: Refrescar datos automáticamente para mantener información actualizada.

**Componentes Clave**:
- `StockBajoList.js`: Interfaz completa con tabla, filtros y exportación
- `useStockBajoAPI.js`: Hook personalizado para gestión de datos y exportación PDF

### MÓDULO DE GESTIÓN DE PRODUCTOS
**Archivo Principal**: `ferredesk_v0/frontend/src/components/Productos/ProductosManager.js`

**Propósito Central**: Administrar el catálogo completo de productos con enfoque en trazabilidad, categorización inteligente y gestión multi-proveedor.

**Objetivos Específicos**:
- **Catalogación Inteligente**: Organizar productos en familias jerárquicas (FAM1, FAM2, FAM3) para facilitar búsquedas y análisis por categorías.
- **Gestión Multi-Proveedor**: Permitir que un mismo producto tenga múltiples proveedores con diferentes códigos, precios y disponibilidades.
- **Control de Stock en Tiempo Real**: Mantener información actualizada de existencias, ubicaciones y movimientos de inventario.
- **Gestión de Precios Dinámicos**: Calcular precios automáticamente basados en costo, margen y alícuotas de IVA configurables.
- **Trazabilidad Completa**: Registrar historial de movimientos, cambios de precios y actualizaciones de proveedores.

**Componentes Clave**:
- `ProductosTable.js`: Visualización tabular con filtros avanzados y expansión de detalles
- `StockForm.js`: Formulario integral para creación/edición de productos
- `AsociarCodigoProveedorModal.js`: Herramienta para vincular códigos de productos entre diferentes proveedores

### MÓDULO DE GESTIÓN DE CLIENTES
**Archivo Principal**: `ferredesk_v0/frontend/src/components/Clientes/ClientesManager.js`

**Propósito Central**: Administrar la base de clientes con enfoque en cumplimiento fiscal y personalización comercial.

**Objetivos Específicos**:
- **Cumplimiento Fiscal**: Almacenar y validar datos fiscales (CUIT, condición IVA, domicilio fiscal) necesarios para facturación.
- **Segmentación Comercial**: Categorizar clientes para aplicar políticas comerciales diferenciadas (descuentos, plazos, precios especiales).
- **Gestión de Crédito**: Controlar límites crediticios, plazos de pago y historial de cumplimiento.
- **Geolocalización**: Organizar clientes por barrios, localidades y provincias para optimización logística.
- **Historial Comercial**: Mantener registro completo de transacciones y comportamiento de compra.

**Componentes Clave**:
- `ClienteForm.js`: Formulario con validaciones fiscales automáticas
- `ClientesTable.js`: Vista tabular con filtros geográficos y comerciales
- `ClienteSelectorModal.js`: Selector rápido para procesos de venta

### MÓDULO DE GESTIÓN DE PROVEEDORES
**Archivo Principal**: `ferredesk_v0/frontend/src/components/Proveedores/ProveedoresManager.js`

**Propósito Central**: Administrar la cadena de suministro con enfoque en automatización de actualizaciones y análisis de costos.

**Objetivos Específicos**:
- **Actualización Automática de Precios**: Importar listas de precios desde archivos Excel con mapeo inteligente de productos.
- **Análisis Comparativo**: Evaluar costos entre diferentes proveedores para optimizar compras.
- **Gestión de Códigos**: Mantener equivalencias entre códigos internos y códigos de proveedores.
- **Historial de Precios**: Registrar evolución de costos para análisis de tendencias.
- **Control de Calidad**: Evaluar performance de proveedores (tiempos de entrega, calidad, cumplimiento).

**Componentes Clave**:
- `ProveedorForm.js`: Formulario de alta/modificación de proveedores
- `ListaPreciosModal.js`: Herramienta de importación masiva de precios desde Excel
- `HistorialListasModal.js`: Visualización de histórico de actualizaciones

### MÓDULO DE VENTAS Y FACTURACIÓN
**Archivo Principal**: `ferredesk_v0/frontend/src/components/Presupuestos y Ventas/PresupuestosManager.js`

**Propósito Central**: Gestionar el ciclo completo de ventas desde cotización hasta facturación, con cumplimiento fiscal automático.

**Objetivos Específicos**:
- **Flujo de Venta Integral**: Presupuesto → Conversión → Factura → Nota de Crédito en un proceso fluido.
- **Cumplimiento Fiscal Automático**: Determinar automáticamente tipo de comprobante (A, B, C, I) según cliente y configuración.
- **Cálculos Precisos**: Aplicar correctamente IVA, descuentos, bonificaciones y márgenes según normativa argentina.
- **Gestión por Pestañas**: Permitir trabajo simultáneo en múltiples presupuestos/ventas sin pérdida de datos.
- **Impresión Fiscal**: Generar comprobantes con formato oficial para diferentes tipos fiscales.

**Componentes Clave**:
- `PresupuestoForm.js`: Formulario principal de cotización
- `VentaForm.js`: Formulario de facturación con validaciones fiscales
- `EditarPresupuestoForm.js`: Modificación de presupuestos existentes
- `NotaCreditoForm.js`: Gestión de anulaciones y devoluciones
- `ConVentaForm.js`: Conversión de presupuestos a facturas
- `ItemsGrid.js`: Grilla inteligente de productos con cálculos automáticos

### SISTEMA DE PLANTILLAS DE COMPROBANTES
**Directorio**: `ferredesk_v0/frontend/src/components/Presupuestos y Ventas/herramientasforms/plantillasComprobantes/`

**Propósito Central**: Generar comprobantes fiscales con formato específico según tipo y normativa argentina.

**Objetivos Específicos**:
- **Diferenciación Fiscal**: Aplicar formato específico según tipo de comprobante (A discrimina IVA, B/C incluyen IVA).
- **Cálculos Precisos**: Mostrar correctamente importes netos, IVA discriminado/incluido, totales.
- **Cumplimiento Legal**: Incluir toda la información requerida por AFIP en cada tipo de comprobante.
- **Presentación Profesional**: Generar documentos con diseño claro y profesional.

**Componentes Especializados**:
- `PlantillaFacturaA.js`: Comprobantes con IVA discriminado para responsables inscriptos
- `PlantillaFacturaB.js`: Comprobantes con IVA incluido para responsables inscriptos
- `PlantillaFacturaC.js`: Comprobantes para consumidores finales

### SISTEMA DE GESTIÓN DE ESTADOS
**Archivos de Hooks**: `ferredesk_v0/frontend/src/utils/use*API.js`

**Propósito Central**: Proporcionar interfaz unificada para comunicación con backend y gestión de estados de la aplicación.

**Objetivos Específicos**:
- **Abstracción de API**: Simplificar llamadas al backend mediante hooks personalizados.
- **Gestión de Estado Reactiva**: Mantener sincronización automática entre frontend y backend.
- **Manejo de Errores Centralizado**: Proporcionar feedback consistente al usuario.
- **Optimización de Performance**: Implementar caché inteligente y actualizaciones eficientes.
- **Tipado Consistente**: Mantener estructura de datos coherente en toda la aplicación.

### MOTOR DE CÁLCULOS FINANCIEROS
**Archivo Principal**: `ferredesk_v0/frontend/src/components/Presupuestos y Ventas/herramientasforms/useCalculosFormulario.js`

**Propósito Central**: Realizar todos los cálculos financieros y fiscales de manera precisa y conforme a la normativa argentina.

**Objetivos Específicos**:
- **Precisión Decimal**: Manejar cálculos con precisión requerida para operaciones comerciales (hasta 4 decimales).
- **Aplicación Correcta de IVA**: Calcular IVA según alícuotas vigentes y tipo de comprobante.
- **Gestión de Descuentos**: Aplicar descuentos por ítem, generales y bonificaciones en orden correcto.
- **Cálculo de Márgenes**: Determinar rentabilidad automáticamente basada en costos y precios finales.
- **Redondeos Fiscales**: Aplicar redondeos según normativa para presentación en comprobantes.

### SISTEMA DE CONFIGURACIÓN EMPRESARIAL
**Archivo Principal**: `ferredesk_v0/frontend/src/components/ConfiguracionManager.js`

**Propósito Central**: Centralizar la configuración de parámetros operativos y fiscales de la empresa.

**Objetivos Específicos**:
- **Información Fiscal**: Configurar datos de la empresa (CUIT, razón social, domicilio fiscal).
- **Parámetros Operativos**: Definir puntos de venta, numeraciones, alícuotas de IVA.
- **Personalización**: Adaptar el sistema a las necesidades específicas de cada ferretería.
- **Políticas Comerciales**: Configurar descuentos automáticos, márgenes por defecto, plazos estándar.
- **Seguridad**: Gestionar permisos de usuarios y accesos a funcionalidades.

### BACKEND - MODELOS DE DATOS
**Archivo Principal**: `ferredesk_v0/backend/ferreapps/ventas/models.py`

**Propósito Central**: Definir la estructura de datos que garantiza integridad, trazabilidad y cumplimiento fiscal.

**Objetivos Específicos de Modelos Clave**:

**Modelo Venta**:
- Almacenar transacciones comerciales con referencia fiscal completa
- Mantener relación con comprobantes AFIP mediante código oficial
- Registrar datos temporales para auditorías (fecha, hora, usuario)
- Soportar asociaciones entre comprobantes (notas de crédito ↔ facturas)

**Modelo VentaDetalleItem**:
- Registrar productos vendidos con trazabilidad completa hasta proveedor
- Almacenar estructura de precios (costo + margen + bonificación = precio final)
- Mantener referencia a alícuotas de IVA para cálculos fiscales precisos

**Modelo Comprobante**:
- Catalogar tipos de comprobantes según códigos AFIP
- Definir comportamiento fiscal (discriminar IVA, incluir IVA, etc.)
- Asociar letras fiscales con tipos de operación

**Modelo ComprobanteAsociacion**:
- Gestionar relaciones entre comprobantes (NC que anulan facturas)
- Garantizar trazabilidad para auditorías fiscales
- Validar consistencia de letras fiscales en asociaciones

### VISTAS CALCULADAS DE BASE DE DATOS
**Archivos**: `ferredesk_v0/backend/ferreapps/ventas/migrations/0023_*.py` y posteriores

**Propósito Central**: Proporcionar cálculos automáticos y consistentes para reportes y visualizaciones en tiempo real.

**Objetivos Específicos**:

**Vista VENTADETALLEITEM_CALCULADO**:
- Calcular precios finales aplicando fórmulas estándar (costo × (1 + margen) × (1 - bonificación))
- Determinar importes de IVA por ítem según alícuota correspondiente
- Proporcionar datos listos para visualización sin cálculos en frontend

**Vista VENTAIVA_ALICUOTA**:
- Agrupar importes por alícuota de IVA para cumplimiento fiscal
- Calcular totales netos gravados por tipo de IVA
- Facilitar generación de reportes fiscales automáticos

**Vista VENTA_CALCULADO**:
- Consolidar totales de venta aplicando descuentos generales en orden correcto
- Incluir información de comprobante para presentación fiscal
- Proporcionar números formateados para impresión oficial

## PRINCIPIOS ARQUITECTÓNICOS

### 1. SEPARACIÓN DE RESPONSABILIDADES
- **Frontend**: Interfaz de usuario, validaciones de entrada, presentación de datos
- **Backend**: Lógica de negocio, validaciones fiscales, persistencia de datos
- **Base de Datos**: Integridad referencial, cálculos automáticos mediante vistas

### 2. CUMPLIMIENTO FISCAL POR DISEÑO
- Toda funcionalidad considera normativa argentina desde el diseño inicial
- Validaciones automáticas impiden generación de comprobantes fiscalmente incorrectos
- Trazabilidad completa para auditorías

### 3. ESCALABILIDAD Y MANTENIBILIDAD
- Componentes modulares y reutilizables
- Hooks personalizados para lógica compartida
- Estructura de datos normalizada y extensible

### 4. EXPERIENCIA DE USUARIO OPTIMIZADA
- Interfaz intuitiva que minimiza curva de aprendizaje
- Automatización de tareas repetitivas
- Feedback inmediato y manejo de errores comprensible

### 5. INTEGRIDAD DE DATOS
- Validaciones en múltiples capas (frontend, backend, base de datos)
- Transacciones atómicas para operaciones críticas
- Backup automático y recuperación de datos

## FLUJOS DE TRABAJO PRINCIPALES

### FLUJO DE VENTA COMPLETO CON INTEGRACIÓN ARCA
1. **Creación de Presupuesto**: Cliente solicita cotización → se genera presupuesto con vigencia
2. **Validación Automática de Cliente**: Sistema consulta AFIP para validar y autocompletar datos fiscales
3. **Ajuste y Negociación**: Modificación de cantidades, precios o descuentos según negociación
4. **Conversión a Venta**: Confirmación del cliente → conversión automática a factura
5. **Emisión ARCA Automática**: Sistema obtiene CAE de AFIP y genera QR oficial automáticamente
6. **Facturación Fiscal Digital**: Generación de comprobante electrónico según normativa AFIP
7. **Gestión Post-Venta**: Emisión de notas de crédito con ARCA, seguimiento de cobros, alertas automáticas

### FLUJO DE EMISIÓN FISCAL AUTOMÁTICA
1. **Preparación de Datos**: Sistema arma payload con datos de venta, cliente y productos
2. **Autenticación AFIP**: Obtención automática de token de acceso con renovación si es necesario
3. **Consulta Último Número**: Obtiene próximo número de comprobante autorizado por AFIP
4. **Emisión de Comprobante**: Envía datos a WSFEv1 y obtiene CAE (Código de Autorización Electrónico)
5. **Generación de QR**: Crea código QR oficial según especificaciones AFIP
6. **Actualización de Venta**: Guarda CAE, fecha de vencimiento y QR en la base de datos
7. **Manejo de Errores**: Procesa y comunica errores de AFIP de manera comprensible

### FLUJO DE CONSULTA AL PADRÓN AFIP
1. **Validación Local**: Verifica formato de CUIT y dígito verificador
2. **Consulta a AFIP**: Utiliza servicio ws_sr_constancia_inscripcion para obtener datos oficiales
3. **Procesamiento de Respuesta**: Mapea datos de AFIP al formato interno del sistema
4. **Detección de Condición IVA**: Analiza impuestos activos para determinar situación fiscal
5. **Autocompletado Inteligente**: Completa automáticamente formulario de cliente
6. **Validación Cruzada**: Verifica consistencia entre datos ingresados y oficiales

### FLUJO DE ACTUALIZACIÓN DE PRECIOS
1. **Recepción de Lista**: Proveedor envía nueva lista de precios (Excel/CSV)
2. **Importación Automática**: Sistema mapea productos y detecta cambios
3. **Validación**: Revisión de incrementos significativos o productos nuevos
4. **Aplicación Selectiva**: Actualización de precios por categoría o proveedor específico
5. **Impacto en Márgenes**: Recálculo automático de márgenes y precios de venta

### FLUJO DE GENERACIÓN DE LIBRO IVA
1. **Selección de Período**: Usuario especifica mes, año y tipo de libro (convencional/informal)
2. **Consolidación de Datos**: Sistema consulta vistas calculadas para obtener ventas del período
3. **Filtrado por Tipo**: Aplica filtros según libro convencional (solo fiscales) o informal (incluye internos)
4. **Cálculo de Alícuotas**: Agrupa importes por alícuota de IVA (21%, 10.5%, 27%, exento)
5. **Validación Fiscal**: Verifica integridad de datos y consistencia con normativas
6. **Generación de Archivos**: Exporta en formato PDF (oficial), Excel (editable) o JSON (integración)
7. **Verificación Final**: Compara totales calculados con registros individuales

### FLUJO DE GESTIÓN DE ALERTAS
1. **Detección Automática**: Sistema monitorea continuamente condiciones configuradas
2. **Generación de Alerta**: Crea alertas según tipo (stock, vencimientos, pagos, sistema)
3. **Categorización**: Asigna prioridad (alta, media, baja) y tipo según configuración
4. **Notificación a Usuario**: Envía notificaciones personalizadas por usuario
5. **Gestión Centralizada**: Usuario revisa, prioriza y gestiona alertas desde panel único
6. **Seguimiento**: Controla estado de cada alerta hasta su resolución
7. **Análisis de Tendencias**: Genera reportes de patrones de alertas para mejora continua

### FLUJO DE CONTROL DE STOCK
1. **Monitoreo Continuo**: Alertas automáticas por stock bajo o productos faltantes
2. **Generación de Informes**: Crea reportes automáticos de productos bajo mínimo
3. **Priorización Inteligente**: Ordena por diferencia entre stock actual y mínimo
4. **Información de Proveedores**: Incluye datos para facilitar órdenes de compra
5. **Exportación para Compras**: Genera PDF para envío a proveedores
6. **Proyección de Demanda**: Análisis de histórico para anticipar necesidades
7. **Gestión de Compras**: Generación automática de órdenes según puntos de reposición
8. **Recepción**: Actualización de stock al recibir mercadería
9. **Auditoría**: Conciliación periódica entre stock físico y sistematizado

## BENEFICIOS OPERATIVOS ESPERADOS

### PARA EL NEGOCIO
- **Reducción de Errores**: Automatización elimina errores manuales en facturación y cálculos
- **Cumplimiento Fiscal Automático**: Integración directa con AFIP garantiza cumplimiento normativo sin intervención manual
- **Mejora de Márgenes**: Control granular de precios optimiza rentabilidad
- **Eficiencia Operativa**: Reducción de tiempos en procesos comerciales y administrativos
- **Toma de Decisiones**: Información estratégica disponible en tiempo real mediante dashboards interactivos
- **Gestión Proactiva**: Sistema de alertas previene problemas antes de que impacten el negocio
- **Reportes Fiscales Automáticos**: Generación de libro IVA y otros reportes sin intervención contable
- **Validación Automática de Clientes**: Consulta directa a AFIP reduce errores en datos fiscales

### PARA LOS USUARIOS
- **Interface Intuitiva**: Curva de aprendizaje mínima por diseño familiar tipo navegador
- **Trabajo Multitarea**: Gestión simultánea de múltiples presupuestos/ventas
- **Automatización Inteligente**: Reducción de tareas repetitivas y cálculos manuales
- **Autocompletado de Datos**: Sistema completa automáticamente información de clientes desde AFIP
- **Información Consolidada**: Vista única de toda la información del cliente/producto
- **Dashboards Interactivos**: Visualización de datos de negocio mediante gráficos dinámicos
- **Alertas Proactivas**: Notificaciones automáticas de situaciones que requieren atención
- **Exportación Flexible**: Reportes en múltiples formatos según necesidad específica
- **Movilidad**: Acceso desde cualquier dispositivo con navegador web

### PARA LA GESTIÓN
- **Visibilidad Total**: Dashboards con indicadores clave de performance y métricas de negocio
- **Control de Inventario**: Información precisa de stock, rotación y alertas de reposición automática
- **Análisis de Rentabilidad**: Reportes automáticos por producto, proveedor, período con visualización gráfica
- **Gestión de Clientes**: Segmentación automática, análisis de comportamiento y ranking de valor
- **Cumplimiento Fiscal Garantizado**: Integración directa con AFIP elimina riesgos normativos
- **Inteligencia de Negocio**: Dashboards analíticos para identificar tendencias y oportunidades
- **Gestión de Alertas Centralizada**: Monitoreo proactivo de aspectos críticos del negocio
- **Reportes Oficiales Automáticos**: Libro IVA y otros reportes fiscales sin intervención manual
- **Escalabilidad**: Sistema preparado para crecimiento del negocio con arquitectura robusta

## TECNOLOGÍAS Y ESTÁNDARES

### FRONTEND
- **React 18**: Framework principal para interfaz de usuario
- **TailwindCSS**: Sistema de diseño utilitario para UI consistente
- **React Hooks**: Gestión de estado moderna y eficiente
- **Chart.js**: Biblioteca para visualización de datos y dashboards interactivos
- **Material-UI**: Componentes de interfaz para alertas y notificaciones
- **Container Queries**: Diseño responsive avanzado para componentes adaptables
- **Responsive Design**: Adaptación automática a diferentes dispositivos

### BACKEND
- **Django 5.0**: Framework web robusto con ORM integrado
- **Django REST Framework**: API REST para comunicación frontend-backend
- **SQLite/PostgreSQL**: Base de datos con soporte para transacciones ACID
- **Python 3.x**: Lenguaje principal con amplio ecosistema
- **Zeep**: Cliente SOAP para integración con servicios web AFIP
- **OpenPyXL**: Generación de archivos Excel para reportes fiscales
- **ReportLab**: Generación de archivos PDF para documentación oficial

### INTEGRACIÓN FISCAL
- **ARCA (AFIP)**: Integración nativa con servicios oficiales argentinos
- **WSFEv1**: Servicio de facturación electrónica AFIP
- **WS Constancia de Inscripción**: Consulta automática al padrón tributario
- **QR AFIP**: Generación automática de códigos QR para comprobantes fiscales

### ESTÁNDARES DE CALIDAD
- **Código en Español**: Nombres descriptivos y documentación en idioma local
- **Principios SOLID**: Arquitectura mantenible y extensible
- **Validación Multicapa**: Seguridad y consistencia en todos los niveles
- **Testing Automatizado**: Pruebas unitarias e integración para calidad continua

## NUEVAS FUNCIONALIDADES IMPLEMENTADAS

### INTEGRACIÓN FISCAL COMPLETA
- **Sistema ARCA**: Integración nativa con servicios AFIP para emisión automática de comprobantes fiscales electrónicos
- **Consulta Padrón AFIP**: Validación y autocompletado automático de datos de clientes desde fuentes oficiales
- **Generación de QR**: Códigos QR oficiales según especificaciones AFIP para todos los comprobantes
- **Libro IVA Automático**: Generación de libros IVA ventas con exportación en múltiples formatos

### INTELIGENCIA DE NEGOCIO VISUAL
- **Dashboards Analíticos**: Visualización interactiva de clientes más valiosos y productos más vendidos
- **Métricas Dinámicas**: Análisis configurable por total facturado, cantidad o frecuencia de compras
- **Responsive Analytics**: Dashboards que se adaptan a diferentes dispositivos usando container queries

### GESTIÓN PROACTIVA OPERATIVA
- **Sistema de Alertas**: Monitoreo automático de stock bajo, vencimientos y eventos críticos
- **Informes de Stock**: Reportes automáticos de productos que requieren reposición con exportación PDF
- **Notificaciones Personalizadas**: Sistema de alertas por usuario con gestión centralizada

### AUTOMATIZACIÓN AVANZADA
- **Autocompletado Inteligente**: Formularios que se completan automáticamente con datos oficiales de AFIP
- **Validación Fiscal Automática**: Verificación de CUITs y condiciones IVA sin intervención manual
- **Exportación Flexible**: Múltiples formatos (PDF, Excel, JSON) según necesidades específicas

### MEJORAS EN EXPERIENCIA DE USUARIO
- **Componentes Modernos**: Interfaces actualizadas con Material-UI y TailwindCSS
- **Hooks Personalizados**: Gestión de estado optimizada para mejor rendimiento
- **Diseño Responsivo Avanzado**: Adaptación inteligente usando las últimas tecnologías CSS

FerreDesk v0 representa una solución integral que combina las mejores prácticas de desarrollo de software con un profundo conocimiento del negocio ferretero argentino, resultando en una herramienta que no solo automatiza procesos sino que potencia el crecimiento y la eficiencia operativa del negocio. Las nuevas funcionalidades implementadas elevan significativamente el nivel de automatización, cumplimiento fiscal y inteligencia de negocio, consolidando a FerreDesk como una plataforma tecnológica líder para el sector ferretero. 